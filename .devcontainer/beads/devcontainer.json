{
	"name": "edge-ai-beads-devcontainer",
	"image": "mcr.microsoft.com/devcontainers/python:3.11-bookworm",
	"features": {
		"ghcr.io/devcontainers/features/common-utils:2": {},
		"ghcr.io/devcontainers/features/docker-in-docker:2": {},
		"ghcr.io/devcontainers/features/git:1": {},
		"ghcr.io/devcontainers/features/azure-cli:1": {
			"extensions": "connectedk8s,k8s-extension,azure-iot-ops,amg,eventgrid"
		},
		"ghcr.io/devcontainers/features/dotnet:2": {},
		"ghcr.io/devcontainers/features/github-cli:1": {},
		"ghcr.io/devcontainers-extra/features/pipx-package:1": {},
		"ghcr.io/devcontainers-extra/features/pre-commit:2": {},
		"ghcr.io/devcontainers/features/node:1": {},
		"ghcr.io/devcontainers/features/terraform:1": {
			"installTerraformDocs": true
		},
		"ghcr.io/rio/features/k3d:1": {},
		"ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {
			"version": "1.33.2",
			"helm": "latest",
			"minikube": "none"
		},
		"ghcr.io/rio/features/k9s:1": {},
		"ghcr.io/devcontainers/features/powershell": {
			"pwsh": "latest"
		},
		"ghcr.io/devcontainers/features/rust:1": {},
		"ghcr.io/devcontainers/features/go:1": {}
	},
	"customizations": {
		"vscode": {
			"mcp": {
				"servers": {
					"beads": {
						"type": "stdio",
						"command": "uvx",
						"args": ["-n", "beads-mcp"]
					}
				}
			},
			"settings": {
				"terminal.integrated.profiles.linux": {
					"bash": {
						"path": "/bin/bash"
					}
				},
				"chat.agentFilesLocations": {
					"copilot/beads/agents": true
				},
				"chat.instructionsFilesLocations": {
					"copilot/beads/instructions": true
				},
				"chat.promptFilesLocations": {
					"copilot/beads/prompts": true
				},
			},
			"extensions": [
				"charliermarsh.ruff",
				"darkriszty.markdown-table-prettify",
				"DavidAnson.vscode-markdownlint",
				"eamodio.gitlens",
				"EditorConfig.EditorConfig",
				"foxundermoon.shell-format",
				"GitHub.vscode-pull-request-github",
				"hashicorp.terraform",
				"ms-azuretools.vscode-azureterraform",
				"ms-azuretools.vscode-bicep",
				"ms-azuretools.vscode-docker",
				"ms-dotnettools.csdevkit",
				"ms-python.debugpy",
				"ms-python.python",
				"ms-python.vscode-pylance",
				"ms-vscode-remote.vscode-remote-extensionpack",
				"ms-vscode.azurecli",
				"streetsidesoftware.code-spell-checker",
				"streetsidesoftware.code-spell-checker-cspell-bundled-dictionaries",
				"timonwong.shellcheck",
				"yzhang.markdown-all-in-one",
				"ms-azuretools.vscode-azure-github-copilot",
				"ms-azure-devops.azure-pipelines",
				"ms-kubernetes-tools.vscode-kubernetes-tools",
				"ms-vscode.powershell",
				"github.vscode-github-actions",
				"bierner.markdown-mermaid",
				"rust-lang.rust-analyzer",
				"ms-dotnettools.vscode-dotnet-runtime",
				"ms-python.autopep8",
				"ms-azuretools.vscode-azurefunctions",
				"ms-azuretools.vscode-azureresourcegroups",
				"ms-python.black-formatter",
				"ms-dotnettools.csharp",
				"vadimcn.vscode-lldb",
				"ms-azuretools.vscode-containers",
				"dbaeumer.vscode-eslint",
				"tamasfe.even-better-toml",
				"ms-python.flake8",
				"golang.go",
				"redhat.vscode-yaml",
				"GitHub.copilot@prerelease",
				"GitHub.copilot-chat@prerelease"
			]
		}
	},
	"forwardPorts": [8080],
	"containerEnv": {
		"BROWSER": "code --new-window"
	},
	"onCreateCommand": {
		"uv": "pip install uv",
		"pip": "pip install -r requirements.txt",
		"npm": "npm install -g npm && npm ci",
		"apt": "sudo apt update && sudo apt install -y shellcheck",
		"go": "go install mvdan.cc/sh/v3/cmd/shfmt@latest",
		"tflint": "curl -s https://raw.githubusercontent.com/terraform-linters/tflint/master/install_linux.sh | bash",
		"update-bashrc": "echo 'export PATH=\"${containerWorkspaceFolder}/scripts:$PATH\"' | sudo tee -a  ~/.bashrc"
	},
	"postAttachCommand": {
		"beads": "go install github.com/steveyegge/beads/cmd/bd@latest"
	},
	"remoteUser": "vscode"
}
