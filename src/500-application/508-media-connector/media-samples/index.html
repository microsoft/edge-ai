<!DOCTYPE html>
<html>
<head>
    <title>Media Connector Development - Sample Media Files</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #0078d4; border-bottom: 2px solid #0078d4; padding-bottom: 10px; }
        h2 { color: #323130; margin-top: 30px; }
        .service-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .service { background: #f8f9fa; padding: 20px; border-radius: 6px; border-left: 4px solid #0078d4; }
        .service h3 { margin-top: 0; color: #0078d4; }
        .endpoint { background: #e8f4fd; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0; }
        code { background: #f1f3f4; padding: 2px 6px; border-radius: 3px; font-family: monospace; }
        .status { margin: 20px 0; padding: 15px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Azure IoT Operations Media Connector - Development Environment</h1>

        <div class="status">
            <strong>üöÄ Development Environment Active</strong><br>
            All media services are running and ready for testing the Azure IoT Operations Media Connector.
        </div>

        <h2>Available Media Sources</h2>

        <div class="service-list">
            <div class="service">
                <h3>üìπ RTSP Camera 1 (Pattern)</h3>
                <p>Test pattern camera with SMPTE color bars</p>
                <div class="endpoint">rtsp://admin:password@localhost:8554/pattern</div>
                <p><strong>Resolution:</strong> 1920x1080, 30fps<br>
                   <strong>Auth:</strong> admin/password</p>
            </div>

            <div class="service">
                <h3>üìπ RTSP Camera 2 (Color Bars)</h3>
                <p>Static color bar test pattern</p>
                <div class="endpoint">rtsp://admin:password@localhost:8555/colorbars</div>
                <p><strong>Resolution:</strong> 1280x720, 15fps<br>
                   <strong>Auth:</strong> admin/password</p>
            </div>

            <div class="service">
                <h3>üìπ RTSP Camera 3 (Moving Ball)</h3>
                <p>Animated bouncing ball pattern</p>
                <div class="endpoint">rtsp://admin:password@localhost:8556/ball</div>
                <p><strong>Resolution:</strong> 640x480, 10fps<br>
                   <strong>Auth:</strong> admin/password</p>
            </div>

            <div class="service">
                <h3>üåê HTTP Media Server</h3>
                <p>Static media files via HTTP</p>
                <div class="endpoint">http://localhost:8080/</div>
                <p>Browse and access sample video files<br>
                   Supports MP4 streaming and MJPEG</p>
            </div>
        </div>

        <h2>Supporting Services</h2>

        <div class="service-list">
            <div class="service">
                <h3>üîå MQTT Broker</h3>
                <p>Eclipse Mosquitto MQTT broker</p>
                <div class="endpoint">mqtt://localhost:1883</div>
                <div class="endpoint">ws://localhost:9001 (WebSocket)</div>
                <p>Subscribe to: <code>media/#</code></p>
            </div>

            <div class="service">
                <h3>üìä Monitoring Stack</h3>
                <p>Prometheus & Grafana monitoring</p>
                <div class="endpoint">http://localhost:9090 (Prometheus)</div>
                <div class="endpoint">http://localhost:3000 (Grafana)</div>
                <p>Grafana login: admin/admin123</p>
            </div>

            <div class="service">
                <h3>üíæ Object Storage</h3>
                <p>MinIO S3-compatible storage</p>
                <div class="endpoint">http://localhost:9000 (API)</div>
                <div class="endpoint">http://localhost:9001 (Console)</div>
                <p>Login: minioadmin/minioadmin123</p>
            </div>

            <div class="service">
                <h3>‚ö° Redis Cache</h3>
                <p>Redis for caching and metadata</p>
                <div class="endpoint">redis://localhost:6379</div>
                <p>No authentication required</p>
            </div>
        </div>

        <h2>Testing Commands</h2>

        <h3>MQTT Testing</h3>
        <pre><code># Subscribe to all media topics
mosquitto_sub -h localhost -t "media/#"

# Publish test message
mosquitto_pub -h localhost -t "media/test" -m "Hello from media connector"</code></pre>

        <h3>RTSP Testing with FFmpeg</h3>
        <pre><code># Test RTSP stream
ffmpeg -i "rtsp://admin:password@localhost:8554/pattern" -t 10 -f null -

# Create snapshot from RTSP stream
ffmpeg -i "rtsp://admin:password@localhost:8554/pattern" -frames:v 1 snapshot.jpg</code></pre>

        <h3>HTTP Media Testing</h3>
        <pre><code># Download test file
curl -O http://localhost:8080/sample.mp4

# Stream with FFmpeg
ffmpeg -i "http://localhost:8080/sample.mp4" -f null -</code></pre>

        <h2>Media Connector Configuration</h2>

        <p>Use these endpoints in your media connector configuration:</p>

        <pre><code>media_sources = [
  {
    name         = "dev-rtsp-camera"
    display_name = "Development RTSP Camera"
    description  = "Test RTSP camera for development"
    source_url   = "rtsp://admin:password@localhost:8554/pattern"
    device_template = "ip-camera-template"
    authentication = {
      type     = "basic"
      username = "admin"
      password = "password"
    }
    tasks = [
      {
        type       = "snapshot-to-mqtt"
        name       = "periodic-snapshot"
        enabled    = true
        schedule   = "*/30 * * * * *"
        mqtt_topic = "media/snapshots/dev-camera"
      }
    ]
  }
]</code></pre>

        <p><strong>MQTT Broker Endpoint:</strong> <code>mqtt://localhost:1883</code></p>

        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; color: #666;">
            <p>Azure IoT Operations Media Connector Development Environment</p>
        </footer>
    </div>
</body>
</html>
