---
title: 'Kata: 300 - Link Work Items to Pull Request'
description: Learn to associate Azure DevOps work items with pull requests using MCP automation for integrated development workflows
author: Edge AI Team
ms.date: 2025-01-25
kata_id: ado-automation-300-link-work-items-to-pull-request
kata_category:
  - ado-automation
kata_difficulty: 3
estimated_time_minutes: 30
learning_objectives:
  - Link work items to pull requests during PR creation
  - Update work item status based on PR lifecycle events
  - Verify work item associations in PR descriptions
prerequisite_katas:
  - ado-automation-200-create-user-story-with-tasks
technologies:
  - Azure DevOps
  - MCP
  - Work Items
  - Pull Requests
  - Git
  - GitHub Copilot
success_criteria:
  - Successfully link work items to PRs during creation
  - Verify work item linkage in PR descriptions and work item history
ai_coaching_level: guided
scaffolding_level: medium-heavy
hint_strategy: progressive
common_pitfalls: []
requires_azure_subscription: false
requires_local_environment: true
tags:
  - ado-automation
search_keywords:
  - pr-work-item-linking
  - pull-request-automation
  - work-item-integration
---

## Quick Context

**You'll Learn**: Integrate Azure DevOps work items with pull request workflows using MCP automation for traceability.

**Real Challenge**: You're a DevOps engineer at a financial services firm where regulatory compliance requires tracing code changes to work items. Manual PR-to-work-item linking is error-prone and time-consuming. This kata walks you through automated work item association with pull requests using GitHub Copilot and MCP.

## Essential Setup

**Required** (check these first):

- [ ] Visual Studio Code with GitHub Copilot extension installed
- [ ] Azure DevOps MCP server configured and user story creation practiced ([Kata 04](./200-create-user-story-with-tasks.md) completed)
- [ ] Access to Azure DevOps repository with PR creation permissions
- [ ] Git repository connected to Azure DevOps with at least one branch
- [ ] At least one active work item to link to PR

**Quick Validation**: Run `git remote -v` to verify Azure DevOps repository connection.

> **ðŸ¤– Want Interactive AI Coaching?**
>
> Load the **Learning Kata Coach** chat mode for task check-offs, progress tracking, progressive hints, and personalized guidance.
>
> In GitHub Copilot Chat, select **Learning Kata Coach** mode and say:
>
> ```text
> I'm working on Link Work Items to Pull Request kata and want interactive coaching with progress tracking.
> ```

## Practice Tasks

### Task 1: Link Work Item During PR Creation (10 minutes)

**What You'll Do**: Create a pull request with work item association in the PR description.

**Steps**:

1. **Prepare** code branch for PR
   - [ ] Create a feature branch: `git checkout -b feature/password-reset-api`
   - [ ] Make a small code change (e.g., add a comment or README update)
   - [ ] Commit: `git commit -m "feat: add password reset API endpoint skeleton"`
   - [ ] Push branch: `git push origin feature/password-reset-api`
   - **Pro tip**: Use conventional commit format for clear change tracking
   - [ ] **Expected result**: Feature branch pushed to Azure DevOps

2. **Create** PR with work item link
   - [ ] In Copilot Chat, say: *"Using MCP, create a pull request from 'feature/password-reset-api' to 'main' with title 'Add password reset API', link to work item #[ID]"*
   - [ ] Replace `[ID]` with a task ID from previous katas
   - [ ] Review PR description generated by MCP
   - **Pro tip**: MCP automatically formats work item references (e.g., "Fixes #12345")
   - [ ] **Expected result**: PR created with work item link in description

3. **Verify** work item linkage
   - [ ] Say: *"Using MCP, get work item #[ID] links and related items"*
   - [ ] Confirm PR appears in work item's "Development" or "Related Work" section
   - [ ] Open Azure DevOps portal, navigate to work item, verify PR link visible
   - **Success check**: Work item shows associated PR with link to PR page
   - [ ] **Expected result**: Bidirectional link established between work item and PR

### Task 2: Update Work Item Status on PR Events (12 minutes)

**What You'll Do**: Automatically update work item states based on PR lifecycle events.

**Steps**:

1. **Configure** automatic state transitions
   - [ ] Say: *"Using MCP, show me automation rules for work item state transitions on PR events"*
   - [ ] Review available automation patterns (e.g., PR created â†’ "Active", PR merged â†’ "Closed")
   - **Pro tip**: Azure DevOps supports state transition rules based on PR status
   - [ ] **Expected result**: Understanding of state transition automation options

2. **Manually** transition work item on PR approval
   - [ ] Get your PR approved (self-approve if allowed, or have teammate review)
   - [ ] Say: *"Using MCP, update work item #[ID] state to 'Resolved' with comment 'PR approved and ready to merge'"*
   - [ ] Verify state change in work item history
   - **Validation checkpoint**: Does work item history show state change with PR reference?
   - [ ] **Expected result**: Work item state updated with audit trail

3. **Complete** PR and close work item
   - [ ] Complete/merge your PR in Azure DevOps portal
   - [ ] Say: *"Using MCP, update work item #[ID] state to 'Closed' with comment 'PR merged, work item complete'"*
   - [ ] Verify work item shows completed PR in development section
   - **Success check**: Work item lifecycle reflects PR completion
   - [ ] **Expected result**: Work item closed with PR completion documented

### Task 3: Bulk Link Multiple Work Items to PR (8 minutes)

**What You'll Do**: Associate multiple work items with a single pull request for comprehensive feature tracking.

**Steps**:

1. **Create** feature branch with multiple changes
   - [ ] Create branch: `git checkout -b feature/order-history-ui`
   - [ ] Make code changes addressing multiple work items
   - [ ] Commit and push: `git commit -m "feat: implement order history UI components"`
   - [ ] **Expected result**: Branch ready for PR with multi-work-item scope

2. **Create** PR linking multiple work items
   - [ ] Say: *"Using MCP, create a pull request from 'feature/order-history-ui' to 'main', link work items #[ID1], #[ID2], #[ID3]"*
   - [ ] Replace IDs with actual work items related to order history
   - [ ] Review PR description showing all linked work items
   - **Pro tip**: Use "Relates to #ID" for partial completion, "Fixes #ID" for full completion
   - [ ] **Expected result**: PR created with multiple work item associations

3. **Verify** all work item links
   - [ ] Query each work item: *"Using MCP, show related PRs for work items #[ID1], #[ID2], #[ID3]"*
   - [ ] Confirm all work items show the same PR in development section
   - [ ] Verify PR description lists all work items correctly
   - **Success check**: Complete traceability from code changes to work items
   - [ ] **Expected result**: All work items linked to PR for comprehensive tracking

## Completion Check

**You've Succeeded When**:

- [ ] Can link work items to PRs during creation with proper references
- [ ] Can update work item status based on PR lifecycle events
- [ ] Can associate multiple work items with a single PR
- [ ] Understand bidirectional linkage between work items and PRs

**Next Steps**: Proceed to [Kata: Monitor Build and Update Work Items](./300-monitor-build-update-work-items.md) to learn CI/CD integration patterns.

---

## Reference Appendix

### Help Resources

- **PR Work Item Linking**: [Link work items to pull requests](https://learn.microsoft.com/azure/devops/boards/github/link-to-from-github)
- **State Transition Rules**: [Automate work item state transitions](https://learn.microsoft.com/azure/devops/boards/work-items/workflow-and-state-categories)
- **GitHub Copilot**: Use for generating PR descriptions with work item references

### Professional Tips

- Use "Fixes #ID" for work items completed by the PR, "Relates to #ID" for partial work
- Include work item context in PR titles for quick scanning
- Update work item states manually if automatic rules not configured
- Multiple work items per PR are acceptable when implementing cohesive features

### Troubleshooting

**Issue**: Work item link not appearing in PR description

- **Quick Fix**: Verify work item ID correct, check permissions, use correct syntax (e.g., "Fixes #12345")

**Issue**: Work item state doesn't update on PR merge

- **Quick Fix**: Verify state transition rules configured, manually update state, check work item type supports automation

**Issue**: PR shows in wrong section of work item (not "Development")

- **Quick Fix**: Use Azure DevOps link type "Pull Request" not generic "Related", verify repository connected to project

---

<!-- markdownlint-disable MD036 -->
*ðŸ¤– Crafted with precision by âœ¨Copilot following brilliant human instruction,
then carefully refined by our team of discerning human reviewers.*
<!-- markdownlint-enable MD036 -->

<!-- Reference Links -->
